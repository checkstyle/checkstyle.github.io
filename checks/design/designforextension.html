<!DOCTYPE html>
<!--
 | Generated by Apache Maven Doxia Site Renderer 1.11.1 from src/xdocs/checks/design/designforextension.xml at 2024-08-25

 | Rendered using Apache Maven Default Skin
-->
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 1.11.1" />
    <title>checkstyle &#x2013; DesignForExtension</title>
    <link rel="stylesheet" href="../../css/maven-base.css" />
    <link rel="stylesheet" href="../../css/maven-theme.css" />
    <link rel="stylesheet" href="../../css/site.css" />
    <link rel="stylesheet" href="../../css/print.css" media="print" />
<script type="text/javascript" src="../../js/checkstyle.js"></script>
        <script type="text/javascript"
              src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
        <script type="text/javascript" src="../../js/anchors.js"></script>
        <script type="text/javascript" src="../../js/google-analytics.js"></script>
        <link rel="icon" href="../../images/favicon.png" type="image/x-icon" />
        <link rel="shortcut icon" href="../../images/favicon.ico" type="image/ico" />
  </head>
  <body class="composite">
    <div id="banner">
<a href="../.././" id="bannerLeft" title="Checkstyle"><img src="../../images/header-checkstyle-logo.png"  alt="Checkstyle"/></a><a href="../.././" id="bannerRight" title="Checkstyle"><img src="../../images/header-right-ruller.png"  alt="Checkstyle"/></a>      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="breadcrumbs">
      <div class="xright"><a href="../../" title="toTop">toTop</a>         | <span id="publishDate">Last Published: 2024-08-25</span>
         | <span id="projectVersion">Version: 10.18.0</span>
      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
    <div id="leftColumn">
      <div id="navcolumn">
       <h5>About</h5>
    <ul>
     <li class="none"><a href="../../index.html" title="Checkstyle">Checkstyle</a></li>
     <li class="none"><a href="../../releasenotes.html" title="Release Notes">Release Notes</a></li>
     <li class="none"><a href="../../consulting.html" title="Consulting">Consulting</a></li>
     <li class="none"><a href="../../sponsoring.html" title="Sponsoring">Sponsoring</a></li>
    </ul>
       <h5>Documentation</h5>
    <ul>
     <li class="expanded"><a href="../../config.html" title="Configuration">Configuration</a>
      <ul>
       <li class="none"><a href="../../property_types.html" title="Property Types">Property Types</a></li>
       <li class="none"><a href="../../config_system_properties.html" title="System Properties">System Properties</a></li>
      </ul></li>
     <li class="expanded"><a href="../../running.html" title="Running">Running</a>
      <ul>
       <li class="none"><a href="../../anttask.html" title="Ant Task">Ant Task</a></li>
       <li class="none"><a href="../../cmdline.html" title="Command Line">Command Line</a></li>
      </ul></li>
     <li class="expanded"><a href="../../checks.html" title="Checks">Checks</a>
      <ul>
       <li class="collapsed"><a href="../../checks/annotation/index.html" title="Annotations">Annotations</a></li>
       <li class="collapsed"><a href="../../checks/blocks/index.html" title="Block Checks">Block Checks</a></li>
       <li class="expanded"><a href="../../checks/design/index.html" title="Class Design">Class Design</a>
        <ul>
         <li class="none"><strong>DesignForExtension</strong></li>
         <li class="none"><a href="../../checks/design/finalclass.html" title="FinalClass">FinalClass</a></li>
         <li class="none"><a href="../../checks/design/hideutilityclassconstructor.html" title="HideUtilityClassConstructor">HideUtilityClassConstructor</a></li>
         <li class="none"><a href="../../checks/design/innertypelast.html" title="InnerTypeLast">InnerTypeLast</a></li>
         <li class="none"><a href="../../checks/design/interfaceistype.html" title="InterfaceIsType">InterfaceIsType</a></li>
         <li class="none"><a href="../../checks/design/mutableexception.html" title="MutableException">MutableException</a></li>
         <li class="none"><a href="../../checks/design/onetoplevelclass.html" title="OneTopLevelClass">OneTopLevelClass</a></li>
         <li class="none"><a href="../../checks/design/sealedshouldhavepermitslist.html" title="SealedShouldHavePermitsList">SealedShouldHavePermitsList</a></li>
         <li class="none"><a href="../../checks/design/throwscount.html" title="ThrowsCount">ThrowsCount</a></li>
         <li class="none"><a href="../../checks/design/visibilitymodifier.html" title="VisibilityModifier">VisibilityModifier</a></li>
        </ul></li>
       <li class="collapsed"><a href="../../checks/coding/index.html" title="Coding">Coding</a></li>
       <li class="collapsed"><a href="../../checks/header/index.html" title="Headers">Headers</a></li>
       <li class="collapsed"><a href="../../checks/imports/index.html" title="Imports">Imports</a></li>
       <li class="collapsed"><a href="../../checks/javadoc/index.html" title="Javadoc Comments">Javadoc Comments</a></li>
       <li class="collapsed"><a href="../../checks/metrics/index.html" title="Metrics">Metrics</a></li>
       <li class="collapsed"><a href="../../checks/misc/index.html" title="Miscellaneous">Miscellaneous</a></li>
       <li class="collapsed"><a href="../../checks/modifier/index.html" title="Modifiers">Modifiers</a></li>
       <li class="collapsed"><a href="../../checks/naming/index.html" title="Naming Conventions">Naming Conventions</a></li>
       <li class="collapsed"><a href="../../checks/regexp/index.html" title="Regexp">Regexp</a></li>
       <li class="collapsed"><a href="../../checks/sizes/index.html" title="Size Violations">Size Violations</a></li>
       <li class="collapsed"><a href="../../checks/whitespace/index.html" title="Whitespace">Whitespace</a></li>
      </ul></li>
     <li class="collapsed"><a href="../../filters/index.html" title="Filters">Filters</a></li>
     <li class="collapsed"><a href="../../filefilters/index.html" title="File Filters">File Filters</a></li>
     <li class="expanded"><a href="../../style_configs.html" title="Style Configurations">Style Configurations</a>
      <ul>
       <li class="none"><a href="../../google_style.html" title="Google's Style">Google's Style</a></li>
       <li class="none"><a href="../../sun_style.html" title="Sun's Style">Sun's Style</a></li>
      </ul></li>
    </ul>
       <h5>Developers</h5>
    <ul>
     <li class="expanded"><a href="../../extending.html" title="Extending Checkstyle">Extending Checkstyle</a>
      <ul>
       <li class="none"><a href="../../writingchecks.html" title="Writing Checks">Writing Checks</a></li>
       <li class="none"><a href="../../writingjavadocchecks.html" title="Writing Javadoc Checks">Writing Javadoc Checks</a></li>
       <li class="none"><a href="../../writingfilters.html" title="Writing Filters">Writing Filters</a></li>
       <li class="none"><a href="../../writingfilefilters.html" title="Writing File Filters">Writing File Filters</a></li>
       <li class="none"><a href="../../writinglisteners.html" title="Writing Listeners">Writing Listeners</a></li>
      </ul></li>
     <li class="none"><a href="../../contributing.html" title="Contributing">Contributing</a></li>
     <li class="expanded"><a href="../../beginning_development.html" title="Beginning Development">Beginning Development</a>
      <ul>
       <li class="none"><a href="../../eclipse.html" title="Eclipse IDE">Eclipse IDE</a></li>
       <li class="none"><a href="../../netbeans.html" title="NetBeans IDE">NetBeans IDE</a></li>
       <li class="none"><a href="../../idea.html" title="IntelliJ IDE">IntelliJ IDE</a></li>
      </ul></li>
     <li class="none"><a href="../../apidocs/index.html" title="Javadoc">Javadoc</a></li>
    </ul>
       <h5>Project Documentation</h5>
    <ul>
     <li class="collapsed"><a href="../../project-info.html" title="Project Information">Project Information</a></li>
     <li class="collapsed"><a href="../../project-reports.html" title="Project Reports">Project Reports</a></li>
    </ul>
      <a href="https://github.com/checkstyle/checkstyle" title="GitHub" class="poweredBy">
        <img class="poweredBy"  alt="GitHub" src="../../images/github_logo_social_coding_outlined.png"     />
      </a>
      <a href="https://twitter.com/checkstyle_java/" title="Twitter" class="poweredBy">
        <img class="poweredBy"  alt="Twitter" src="../../images/twitter_button.png"     />
      </a>
      <a href="https://stackoverflow.com/questions/tagged/checkstyle" title="Stackoverflow" class="poweredBy">
        <img class="poweredBy"  alt="Stackoverflow" src="../../images/stackoverflow.jpeg"     />
      </a>
      <a href="https://groups.google.com/forum/#!forum/checkstyle" title="GoogleGroups" class="poweredBy">
        <img class="poweredBy"  alt="GoogleGroups" src="../../images/groups.png"     />
      </a>
      <a href="https://www.ej-technologies.com/products/jprofiler/overview.html" title="JProfiler" class="poweredBy">
        <img class="poweredBy"  alt="JProfiler" src="https://www.ej-technologies.com/images/product_banners/jprofiler_medium.png"     />
      </a>
      </div>
    </div>
    <div id="bodyColumn">
      <div id="contentBox">

  
    <section>
<h2><a name="DesignForExtension"></a>DesignForExtension</h2>
      
<p>Since Checkstyle 3.1</p>
      <a name="Description"></a><section id="Description">
<h3><a name="Description"></a>Description</h3>
        
<p>
          Checks that classes are designed for extension (subclass creation).
        </p>
        
<p>
          Nothing wrong could be with founded classes.
          This check makes sense only for library projects (not application projects)
          which care of ideal OOP-design to make sure that class works in all cases even misusage.
          Even in library projects this check most likely will find classes that are designed
          for extension by somebody. User needs to use suppressions extensively to got a benefit
          from this check, and keep in suppressions all confirmed/known classes that are deigned
          for inheritance intentionally to let the check catch only new classes, and bring this to
          team/user attention.
        </p>
        
<p>
         ATTENTION: Only user can decide whether a class is designed for extension or not.
         The check just shows all classes which are possibly designed for extension.
         If smth inappropriate is found please use suppression.
        </p>
        
<p>
         ATTENTION: If the method which can be overridden in a subclass has a javadoc comment
         (a good practice is to explain its self-use of overridable methods) the check will not
         rise a violation. The violation can also be skipped if the method which can be overridden
         in a subclass has one or more annotations that are specified in ignoredAnnotations
         option. Note, that by default @Override annotation is not included in the
         ignoredAnnotations set as in a subclass the method which has the annotation can also be
         overridden in its subclass.
        </p>
        
<p>
          Problem is described at &quot;Effective Java, 2nd Edition by Joshua Bloch&quot; book, chapter
          &quot;Item 17: Design and document for inheritance or else prohibit it&quot;.
        </p>
        
<p>
          Some quotes from book:
        </p>
        
<blockquote>The class must document its self-use of overridable methods.
By convention, a method that invokes overridable methods contains a description
of these invocations at the end of its documentation comment. The description
begins with the phrase &#x201c;This implementation.&#x201d;
        </blockquote>
        
<blockquote>The best solution to this problem is to prohibit subclassing in classes that
are not designed and documented to be safely subclassed.
        </blockquote>
        
<blockquote>If a concrete class does not implement a standard interface, then you may
inconvenience some programmers by prohibiting inheritance. If you feel that you
must allow inheritance from such a class, one reasonable approach is to ensure
that the class never invokes any of its overridable methods and to document this
fact. In other words, eliminate the class&#x2019;s self-use of overridable methods entirely.
In doing so, you&#x2019;ll create a class that is reasonably safe to subclass. Overriding a
method will never affect the behavior of any other method.
        </blockquote>
        
<p>
          The check finds classes that have overridable methods (public or protected methods
          that are non-static, not-final, non-abstract) and have non-empty implementation.
        </p>

        
<p>
          Rationale: This library design style protects superclasses against
          being broken by subclasses. The downside is that subclasses are
          limited in their flexibility, in particular they cannot prevent
          execution of code in the superclass, but that also means that
          subclasses cannot corrupt the state of the superclass by forgetting
          to call the superclass's method.
        </p>
        
<p>
          More specifically,
          it enforces a programming style where superclasses provide empty
          &quot;hooks&quot; that can be implemented by subclasses.
        </p>
        
<p>
          Example of code that cause violation as it is designed for extension:
        </p>
        
<div class="source">
<pre>
public abstract class Plant {
  private String roots;
  private String trunk;

  protected void validate() {
    if (roots == null) throw new IllegalArgumentException(&quot;No roots!&quot;);
    if (trunk == null) throw new IllegalArgumentException(&quot;No trunk!&quot;);
  }

  public abstract void grow();
}

public class Tree extends Plant {
  private List leaves;

  @Overrides
  protected void validate() {
    super.validate();
    if (leaves == null) throw new IllegalArgumentException(&quot;No leaves!&quot;);
  }

  public void grow() {
    validate();
  }
}
        </pre></div>
        
<p>
          Example of code without violation:
        </p>
        
<div class="source">
<pre>
public abstract class Plant {
  private String roots;
  private String trunk;

  private void validate() {
    if (roots == null) throw new IllegalArgumentException(&quot;No roots!&quot;);
    if (trunk == null) throw new IllegalArgumentException(&quot;No trunk!&quot;);
    validateEx();
  }

  protected void validateEx() { }

  public abstract void grow();
}
        </pre></div>
      </section>

      <a name="Properties"></a><section id="Properties">
<h3><a name="Properties"></a>Properties</h3>
        
<div class="wrapper">
          
<table border="0" class="bodyTable">
            
<tr class="a">
              
<th>name</th>
              
<th>description</th>
              
<th>type</th>
              
<th>default value</th>
              
<th>since</th>
            </tr>
            
<tr class="b">
              
<td align="left">ignoredAnnotations</td>
              
<td>Specify annotations which allow the check to skip the method from validation.</td>
              
<td><a href="../../property_types.html#String.5B.5D">String[]</a></td>
              
<td><code>After, AfterClass, Before, BeforeClass, Test</code></td>
              
<td>7.2</td>
            </tr>
            
<tr class="a">
              
<td align="left">requiredJavadocPhrase</td>
              
<td>Specify the comment text pattern which qualifies a method as designed for extension. Supports multi-line regex.</td>
              
<td><a href="../../property_types.html#Pattern">Pattern</a></td>
              
<td><code>&quot;.*&quot;</code></td>
              
<td>8.40</td>
            </tr>
          </table>
        </div>
      </section>

      <a name="Examples"></a><section id="Examples">
<h3><a name="Examples"></a>Examples</h3>
        
<p id="Example1-config">
          To configure the check:
        </p>
        
<div class="source">
<pre>
&lt;module name=&quot;Checker&quot;&gt;
  &lt;module name=&quot;TreeWalker&quot;&gt;
    &lt;module name=&quot;DesignForExtension&quot;/&gt;
  &lt;/module&gt;
&lt;/module&gt;
        </pre></div>
        
<p id="Example1-code">Example:</p>
        
<div class="source">
<pre>
public abstract class Example1 {
  private int bar;

  public int m1() {return 2;}  // violation

  public int m2() {return 8;}  // violation

  private void m3() {m4();}  // OK. Private method.

  protected void m4() { }  // OK. No implementation.

  public abstract void m5();  // OK. Abstract method.

  /**
   * This implementation ...
   @return some int value.
   */
  public int m6() {return 1;}  // OK. Have javadoc on overridable method.

  /**
   * Some comments ...
   */
  public int m7() {return 1;}  // OK. Have javadoc on overridable method.

  /**
   * This
   * implementation ...
   */
  public int m8() {return 2;}  // OK. Have javadoc on overridable method.

  @Override                   // violation
  public String toString() {
    return &quot;&quot;;
  }
}
        </pre></div>

        
<p id="Example2-config">
          To configure the check to allow methods which have @Override annotations to be
          designed for extension.
        </p>
        
<div class="source">
<pre>
&lt;module name=&quot;Checker&quot;&gt;
  &lt;module name=&quot;TreeWalker&quot;&gt;
    &lt;module name=&quot;DesignForExtension&quot;&gt;
      &lt;property name=&quot;ignoredAnnotations&quot; value=&quot;Override&quot;/&gt;
    &lt;/module&gt;
  &lt;/module&gt;
&lt;/module&gt;
        </pre></div>
        
<p id="Example2-code">Example:</p>
        
<div class="source">
<pre>
public abstract class Example2 {
  private int bar;

  public int m1() {return 2;}  // violation

  public int m2() {return 8;}  // violation

  private void m3() {m4();}  // OK. Private method.

  protected void m4() { }  // OK. No implementation.

  public abstract void m5();  // OK. Abstract method.

  /**
   * This implementation ...
   @return some int value.
   */
  public int m6() {return 1;}  // OK. Have javadoc on overridable method.

  /**
   * Some comments ...
   */
  public int m7() {return 1;}  // OK. Have javadoc on overridable method.

  /**
   * This
   * implementation ...
   */
  public int m8() {return 2;}  // OK. Have javadoc on overridable method.

  @Override
  public String toString() {
    return &quot;&quot;;
  }
}
        </pre></div>

        
<p id="Example3-config">
          To configure the check to allow methods which contain a specified comment text pattern in
          their javadoc to be designed for extension.
        </p>
        
<div class="source">
<pre>
&lt;module name=&quot;Checker&quot;&gt;
  &lt;module name=&quot;TreeWalker&quot;&gt;
    &lt;module name=&quot;DesignForExtension&quot;&gt;
      &lt;property name=&quot;requiredJavadocPhrase&quot; value=&quot;This implementation&quot;/&gt;
    &lt;/module&gt;
  &lt;/module&gt;
&lt;/module&gt;
        </pre></div>
        
<p id="Example3-code">Example:</p>
        
<div class="source">
<pre>
public abstract class Example3 {
  private int bar;

  public int m1() {return 2;}  // violation

  public int m2() {return 8;}  // violation

  private void m3() {m4();}  // OK. Private method.

  protected void m4() { }  // OK. No implementation.

  public abstract void m5();  // OK. Abstract method.

  /**
   * This implementation ...
   @return some int value.
   */
  public int m6() {return 1;}  // OK. Have required javadoc.

  /**
   * Some comments ...
   */
  public int m7() {return 1;}  // violation

  /**
   * This
   * implementation ...
   */
  public int m8() {return 2;}  // violation

  @Override                    // violation
  public String toString() {
    return &quot;&quot;;
  }
}
        </pre></div>

        
<p id="Example4-config">
          To configure the check to allow methods which contain a specified comment text pattern in
          their javadoc which can span multiple lines to be designed for extension.
        </p>
        
<div class="source">
<pre>
&lt;module name=&quot;Checker&quot;&gt;
  &lt;module name=&quot;TreeWalker&quot;&gt;
    &lt;module name=&quot;DesignForExtension&quot;&gt;
      &lt;property name=&quot;requiredJavadocPhrase&quot;
        value=&quot;This[\s\S]*implementation&quot;/&gt;
    &lt;/module&gt;
  &lt;/module&gt;
&lt;/module&gt;
        </pre></div>
        
<p id="Example4-code">Example:</p>
        
<div class="source">
<pre>
public abstract class Example4 {
  private int bar;

  public int m1() {return 2;}  // violation

  public int m2() {return 8;}  // violation

  private void m3() {m4();}

  protected void m4() { }  // OK. No implementation.

  public abstract void m5();  // OK. Abstract method.

  /**
   * This implementation ...
   @return some int value.
   */
  public int m6() {return 1;}  // OK. Have required javadoc.

  /**
   * Some comments ...
   */
  public int m7() {return 1;}  // violation

  /**
   * This
   * implementation ...
   */
  public int m8() {return 2;}  // OK. Have required javadoc.

  @Override                    // violation
  public String toString() {
    return &quot;&quot;;
  }
}
        </pre></div>
      </section>

      <a name="Example_of_Usage"></a><section id="Example_of_Usage">
<h3><a name="Example_of_Usage"></a>Example of Usage</h3>
        
<ul>
          
<li>
            <a class="externalLink" href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%20path%3A**%2Fsun_checks.xml+repo%3Acheckstyle%2Fcheckstyle+DesignForExtension">
            Sun Style</a>
          </li>
          
<li>
            <a class="externalLink" href="https://github.com/search?q=path%3Aconfig%20path%3A**%2Fcheckstyle-checks.xml+repo%3Acheckstyle%2Fcheckstyle+DesignForExtension">
            Checkstyle Style</a>
          </li>
        </ul>
      </section>

      <a name="Violation_Messages"></a><section id="Violation_Messages">
<h3><a name="Violation_Messages"></a>Violation Messages</h3>
        
<ul>
          
<li>
            <a class="externalLink" href="https://github.com/search?q=path%3Asrc%2Fmain%2Fresources%2Fcom%2Fpuppycrawl%2Ftools%2Fcheckstyle%2Fchecks%2Fdesign%20path%3A**%2Fmessages*.properties+repo%3Acheckstyle%2Fcheckstyle+%22design.forExtension%22">
              design.forExtension
            </a>
          </li>
        </ul>
        
<p>
          All messages can be customized if the default message doesn't suit you.
          Please <a href="../../config.html#Custom_messages">see the documentation</a>
          to learn how to.
        </p>
      </section>

      <a name="Package"></a><section id="Package">
<h3><a name="Package"></a>Package</h3>
        
<p>
          com.puppycrawl.tools.checkstyle.checks.design
        </p>
      </section>

      <a name="Parent_Module"></a><section id="Parent_Module">
<h3><a name="Parent_Module"></a>Parent Module</h3>
        
<p>
          <a href="../../config.html#TreeWalker">TreeWalker</a>
        </p>
      </section>
    </section>
  

      </div>
    </div>
    <div class="clear">
      <hr/>
    </div>
    <div id="footer">
      <div class="xright">
        Copyright &#169;      2001&#x2013;2024..      </div>
      <div class="clear">
        <hr/>
      </div>
    </div>
  </body>
</html>
